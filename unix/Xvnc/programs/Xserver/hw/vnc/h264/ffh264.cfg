# Default Profile
# HW 800000 bit/s 30 fps Constant Quality Q30
[profile_0]
# libx264 encoder settings
Fps=30
Bitrate=800000

# try to leverage OpenCL for encoding (1:0 enable/disable)
OpenCL=1

# GOP size
GopSize=250

# Encoding profile: baseline, main, high, high10, high422, high444
Profile=baseline

# Possible presets: ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow, placebo
Preset=faster

# Num of encoder threads
Threads=auto

# Profile overrides
#
# num of B-frames
MaxBFrames=2

# num of reference frames
RefFrames=4

# Ratecontrol method
#
# Quality-based VBR (-12-51) [23.0]
#Crf=35
#CrfMax=50

# Force constant QP (0-81, 0=lossless)
Qp=33
QpMin=20
QpMax=50

# AQ
# 1: Variance AQ (complexity mask)
# 2: Auto-variance AQ
# 3: Auto-variance AQ with bias to dark scenes
#aqMode=2
# Reduces blocking and blurring in flat and textured areas. [1.0]
#aqStrength=1.0

# When global_quality is specified, a quality-based mode is used
# For CQP mode, global_quality is divided by 118 (let's call this quant)
# and then quantization parameters are computed as per frame type
# For I-frames, QP is quant * 0.8, clipped to between 0 and 51
# For P-frames, QP is quant, clipped to between 0 and 51
# For B-frames, QP is quant * 1.25 + 1.25, clipped to between 0 and 51
# For the ICQ modes, quality is the global_quality, clipped to between 1 and 51
# Lower Value = Better Quality
GlobalQ=30

# VAAPI hardware encoder settings
#
# 1:0 enable/disable h264 vaapi encoder
HwAccel=1

# VAAPI device path
VAAPIDev=/dev/dri/renderD128

# Rate Control mode
# auto - Choose mode automatically based on other parameters
# CQP  - Constant-quality
# CBR  - Constant-bitrate
# VBR  - Variable-bitrate
# ICQ  - Intelligent constant-quality
# QVBR - Quality-defined variable-bitrate
# AVBR - Average variable-bitrate
hRcMode=CQP

# Set encode quality (trades off against speed, higher is faster)
hQuality=1

# Entropy coder type: cavlc, cabac, vlc, ac
hCoder=vlc

# Set profile: constrained_baseline, main, high
hProfile=constrained_baseline

# Maximum processing parallelism. Increase this to improve single channel performance
hAsyncDepth=60

# Set level (level_idc)
hLevelIdc=4.1

# Mid Bandwidth Profile
# HW VAAPI 800000 bit/s 25 fps СQP Q34
[profile_1]
Fps=25
Bitrate=800000
GopSize=250
Profile=baseline
Preset=ultrafast
Threads=auto
MaxBFrames=2
RefFrames=4
GlobalQ=34
HwAccel=1
VAAPIDev=/dev/dri/renderD128
hRcMode=CQP
hQuality=1
hCoder=vlc
hProfile=constrained_baseline
hAsyncDepth=60
hLevelIdc=4.1

# Low Bandwidth Profile
# HW VAAPI 500000 bit/s 23 fps СBR Q40
[profile_2]
Fps=23
Bitrate=500000
GopSize=250
Profile=baseline
Preset=ultrafast
Threads=auto
MaxBFrames=2
RefFrames=4
GlobalQ=40
HwAccel=1
VAAPIDev=/dev/dri/renderD128
hRcMode=CQP
hQuality=1
hCoder=vlc
hProfile=constrained_baseline
hAsyncDepth=60
hLevelIdc=4.1

# x264 Default Profile
# SW+OpenCL x264 800000 bit/s 30 fps Constant Q20
[profile_3]
Fps=30
Bitrate=800000
OpenCL=1
GopSize=250
Profile=baseline
Preset=ultrafast
Threads=auto
MaxBFrames=2
RefFrames=4
Crf=20
CrfMax=51
#Qp=43
#QpMin=40
#QpMax=50
#aqMode=2
#aqStrength=1.0
#GlobalQ=30
#HwAccel=0
#VAAPIDev=/dev/dri/renderD128
#hRcMode=CQP
#hQuality=1
#hCoder=vlc
#hProfile=constrained_baseline
#hAsyncDepth=60
#hLevelIdc=4.1

# Mid Bandwidth Profile
# SW+OpenCL x264 800000 bit/s 25 fps Constant
[profile_4]
Fps=25.0
Bitrate=800000
OpenCL=1
GopSize=250
Profile=baseline
Preset=ultrafast
Threads=auto
MaxBFrames=2
RefFrames=4
Crf=35
CrfMax=51
#Qp=43
#QpMin=40
#QpMax=50
#aqMode=2
#aqStrength=1.0
#GlobalQ=30
#HwAccel=0
#VAAPIDev=/dev/dri/renderD128
#hRcMode=CQP
#hQuality=1
#hCoder=vlc
#hProfile=constrained_baseline
#hAsyncDepth=60
#hLevelIdc=4.1

# Low Bandwidth Profile
# SW+OpenCL x264 500000 bit/s 23 fps Constant
[profile_5]
Fps=23.0
Bitrate=500000
OpenCL=1
GopSize=250
Profile=baseline
Preset=ultrafast
Threads=auto
MaxBFrames=2
RefFrames=4
Crf=41
CrfMax=51
#Qp=43
#QpMin=40
#QpMax=50
#aqMode=2
#aqStrength=1.0
#GlobalQ=30
#HwAccel=0
#VAAPIDev=/dev/dri/renderD128
#hRcMode=CQP
#hQuality=1
#hCoder=vlc
#hProfile=constrained_baseline
#hAsyncDepth=60
#hLevelIdc=4.1

# h264_mpp example settings
# Profiles: baseline, main, high
# hRcMode: VBR, CBR, CQP, AVBR
# hCoder: cavlc, cabac
#
[profile_6]
HwAccel=2
Fps=30.0
Bitrate=1000000
Profile=baseline
hRcMode=CQP
hCoder=cavlc
hLevelIdc=5.1
Qp=33
QpMin=30
QpMax=50

[profile_7]
HwAccel=2
Fps=25.0
Bitrate=1500000
Profile=baseline
hRcMode=CBR
hCoder=cabac
hLevelIdc=5
Qp=35
QpMin=20
QpMax=50
GopSize=150
MaxBFrames=2
RefFrames=4
Threads=auto

[profile_8]
HwAccel=2
Fps=25.0
Bitrate=800000
Profile=baseline
hRcMode=VBR
hCoder=cavlc
hLevelIdc=5
Qp=20
QpMin=20
QpMax=50
GopSize=250
MaxBFrames=2
RefFrames=4
Threads=auto
